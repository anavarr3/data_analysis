---
title: "data_analysis_EPA"
output: html_document
date: "2023-11-10"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(dplyr)
library(janitor)
```
# Dataset: Maryland Notices of Intent to Foreclose (July 2021 - Oct. 2023)

```{r}
# Read in and clean the data
foreclosures <- read_csv("Maryland_Notices_of_Intent_to_Foreclose.csv") |> 
  clean_names() |> 
  rename(february_2022 = february_2020)
```
```{r}
# Results of code: 
foreclosures
```


```{r}
# Here we wanted to try and make a quick map to see what we were looking at other than just a table of numbers.
foreclosures_sum <- foreclosures |>
  group_by(zip) |>
  summarise(foreclosures_sum = sum(across(contains("_")))) |>
  arrange(desc(foreclosures_sum))

foreclosures_sum

write_csv(foreclosures_sum, "foreclosure_sum.csv")
```
Q1. From July '21- Oct'23 "the end of the pause on foreclosure notices", which zip code has had the most notices recorded?
**This question is pretty much addressed above by adding the number of notices across the dataset, grouping the results by zip code, and arranging them in descending order.**

Q2. How has this zip code changed over the timespan?
**Since the dataset is already ordered chronologically, simply filtering for the zip code that had the most notices will gives us an idea of how many notices were given in that zip code month-by-month.**
```{r}
foreclosures |> 
  filter(zip == 20772)
```

Q3. Using census data, what are the demographics of this zip code?
**Once we join foreclosures_sum with census data (demographics), we can get a better idea of the population in 20772 and highlight the ones that stand out.**

Q4. During the "holiday season" (Oct-Dec), how many foreclosures occur? And where?
**Limitations: we can only look at the data for 2021 and 2022 to compare the holiday season foreclosures since the 2023 data is not in yet**
```{r}
# Here we created a separate dataframe focusing on 2021 and 2022 so we could parse through the data that qualifies for this question
twoyearforeclosures <- foreclosures |> 
  group_by(zip) |>
  select(ends_with("1")|ends_with("2"))
twoyearforeclosures
```
Q5. What are the differences in foreclosure notices by season (warm months vs cold months)?
**We're concerned about our ability to filter by month since the dates are in the column position.**
```{r}
# Here we tried to transpose the data in hopes that it'll help with the filtering
transpose_twoyearforeclosures <- as.data.frame(t(twoyearforeclosures))
colnames(transpose_twoyearforeclosures) <- transpose_twoyearforeclosures[1, ]
transpose_twoyearforeclosures <- transpose_twoyearforeclosures[-1, ]
transpose_twoyearforeclosures
```
